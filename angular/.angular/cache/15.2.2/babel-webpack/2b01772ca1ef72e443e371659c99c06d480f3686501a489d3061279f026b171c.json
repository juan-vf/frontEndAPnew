{"ast":null,"code":"import { LoginUser } from 'src/app/model/login-user';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/token.service\";\nimport * as i2 from \"src/app/service/auth.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/service/modal-switch.service\";\nexport class IniciarSesionComponent {\n  constructor(tokenService, authService, formBuilder, router, $modalSwService) {\n    // this.form=this.formBuilder.group(\n    //   {\n    this.tokenService = tokenService;\n    this.authService = authService;\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.$modalSwService = $modalSwService;\n    this.isLogged = false;\n    this.isLogginFail = false;\n    this.roles = [];\n    //   }\n    // )\n  }\n\n  ngOnInit() {\n    if (this.tokenService.getToken()) {\n      this.isLogged = true;\n      this.isLogginFail = false;\n      this.roles = this.tokenService.getAuthorities();\n    }\n  }\n  onLogin() {\n    this.loginUser = new LoginUser(this.userName, this.password);\n    this.authService.loginUser(this.loginUser).subscribe(data => {\n      this.isLogged = true;\n      this.isLogginFail = false;\n      this.tokenService.setToken(data.token);\n      this.tokenService.setUserName(data.userName);\n      this.tokenService.setAuthorities(data.authorities);\n      this.roles = data.authorities;\n      this.router.navigate(['']);\n    }, err => {\n      this.isLogged = false;\n      this.isLogginFail = true;\n      this.errMsj = err.error.mensaje;\n      console.log(this.errMsj);\n    });\n  }\n  closeModalLogin() {\n    this.$modalSwService.$modal.emit(false);\n    //this.modalSwitch = false;\n  }\n}\n\nIniciarSesionComponent.ɵfac = function IniciarSesionComponent_Factory(t) {\n  return new (t || IniciarSesionComponent)(i0.ɵɵdirectiveInject(i1.TokenService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.ModalSwitchService));\n};\nIniciarSesionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: IniciarSesionComponent,\n  selectors: [[\"app-iniciar-sesion\"]],\n  decls: 20,\n  vars: 2,\n  consts: [[1, \"LoginContainer\", \"gx-0\", \"gy-0\", \"d-flex\", \"flex-column\", \"col-12\"], [1, \"closeButton\"], [1, \"rounded\", 3, \"click\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"form-floating\", \"mb-3\"], [\"type\", \"email\", \"id\", \"userName\", \"name\", \"userName\", \"required\", \"\", \"placeholder\", \"Usuario\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"userName\"], [1, \"form-floating\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", \"placeholder\", \"Contrase\\u00F1a\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\"], [1, \"\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n  template: function IniciarSesionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function IniciarSesionComponent_Template_button_click_2_listener() {\n        return ctx.closeModalLogin();\n      });\n      i0.ɵɵtext(3, \"X\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\")(5, \"h2\");\n      i0.ɵɵtext(6, \" Iniciar sesion \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"form\", 3, 4);\n      i0.ɵɵlistener(\"ngSubmit\", function IniciarSesionComponent_Template_form_ngSubmit_7_listener() {\n        return ctx.onLogin();\n      });\n      i0.ɵɵelementStart(9, \"div\", 5)(10, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function IniciarSesionComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.userName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"label\", 7);\n      i0.ɵɵtext(12, \"Tu Usuario\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"div\", 8)(14, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function IniciarSesionComponent_Template_input_ngModelChange_14_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"label\", 10);\n      i0.ɵɵtext(16, \"Tu Contrase\\u00F1a\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 11)(18, \"button\", 12);\n      i0.ɵɵtext(19, \"Iniciar\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.userName);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n  styles: [\".LoginContainer[_ngcontent-%COMP%]{\\r\\n    \\r\\n     \\r\\n    border-radius: .5em;\\r\\n    padding: 2em;\\r\\n    background-color: rgb(100, 100, 100, .5);\\r\\n    \\r\\n    \\r\\n    align-items: center;\\r\\n    \\r\\n    text-align: center;\\r\\n    \\r\\n    \\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9pbmljaWFyLXNlc2lvbi9pbmljaWFyLXNlc2lvbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7R0FZRztBQUNIO0lBQ0kscUJBQXFCO0tBQ3BCLHdCQUF3QjtJQUN6QixtQkFBbUI7SUFDbkIsWUFBWTtJQUNaLHdDQUF3QztJQUN4Qyx3QkFBd0I7SUFDeEIsNkJBQTZCO0lBQzdCLG1CQUFtQjtJQUNuQiwyQkFBMkI7SUFDM0Isa0JBQWtCO0lBQ2xCLGlCQUFpQjtJQUNqQixrQkFBa0I7QUFDdEIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAuY29udGFpbmVyTW9kYWx7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDA7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgd2lkdGg6IDEwMHZ3O1xyXG4gICAgaGVpZ2h0OiA1MHZoO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIFxyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufSAqL1xyXG4uTG9naW5Db250YWluZXJ7XHJcbiAgICAvKiBwb3NpdGlvbjogZml4ZWQ7ICovXHJcbiAgICAgLyogcG9zaXRpb246IGFic29sdXRlOyAqL1xyXG4gICAgYm9yZGVyLXJhZGl1czogLjVlbTtcclxuICAgIHBhZGRpbmc6IDJlbTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigxMDAsIDEwMCwgMTAwLCAuNSk7XHJcbiAgICAvKiBwb3NpdGlvbjogYWJzb2x1dGU7ICovXHJcbiAgICAvKiBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgKi9cclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAvKiBhbGlnbi1jb250ZW50OiBjZW50ZXI7ICovXHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAvKiB3aWR0aDogNTB2dzsgKi9cclxuICAgIC8qIGhlaWdodDogNzB2aDsgKi9cclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"AAGA,SAASA,SAAS,QAAQ,0BAA0B;;;;;;;AAUpD,OAAM,MAAOC,sBAAsB;EAYjCC,YAAoBC,YAA0B,EAAUC,WAAwB,EAAUC,WAAwB,EAAUC,MAAc,EAAUC,eAAmC;IACrL;IACA;IAFkB,iBAAY,GAAZJ,YAAY;IAAwB,gBAAW,GAAXC,WAAW;IAAuB,gBAAW,GAAXC,WAAW;IAAuB,WAAM,GAANC,MAAM;IAAkB,oBAAe,GAAfC,eAAe;IARnK,aAAQ,GAAY,KAAK;IACzB,iBAAY,GAAY,KAAK;IAI7B,UAAK,GAAa,EAAE;IAOlB;IACA;EACF;;EAEAC,QAAQ;IACN,IAAI,IAAI,CAACL,YAAY,CAACM,QAAQ,EAAE,EAAE;MAChC,IAAI,CAACC,QAAQ,GAAG,IAAI;MACpB,IAAI,CAACC,YAAY,GAAG,KAAK;MACzB,IAAI,CAACC,KAAK,GAAG,IAAI,CAACT,YAAY,CAACU,cAAc,EAAE;;EAGnD;EAEOC,OAAO;IACZ,IAAI,CAACC,SAAS,GAAG,IAAIf,SAAS,CAAC,IAAI,CAACgB,QAAQ,EAAE,IAAI,CAACC,QAAQ,CAAC;IAC5D,IAAI,CAACb,WAAW,CACbW,SAAS,CAAC,IAAI,CAACA,SAAS,CAAC,CAACG,SAAS,CAClCC,IAAI,IAAG;MACL,IAAI,CAACT,QAAQ,GAAG,IAAI;MACpB,IAAI,CAACC,YAAY,GAAG,KAAK;MACzB,IAAI,CAACR,YAAY,CAACiB,QAAQ,CAACD,IAAI,CAACE,KAAK,CAAC;MACtC,IAAI,CAAClB,YAAY,CAACmB,WAAW,CAACH,IAAI,CAACH,QAAQ,CAAC;MAC5C,IAAI,CAACb,YAAY,CAACoB,cAAc,CAACJ,IAAI,CAACK,WAAW,CAAC;MAClD,IAAI,CAACZ,KAAK,GAAGO,IAAI,CAACK,WAAW;MAC7B,IAAI,CAAClB,MAAM,CAACmB,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC,EAAEC,GAAG,IAAG;MACP,IAAI,CAAChB,QAAQ,GAAG,KAAK;MACrB,IAAI,CAACC,YAAY,GAAG,IAAI;MACxB,IAAI,CAACgB,MAAM,GAAGD,GAAG,CAACE,KAAK,CAACC,OAAO;MAC/BC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACJ,MAAM,CAAC;IAG1B,CAAC,CAAC;EACR;EAGAK,eAAe;IACb,IAAI,CAACzB,eAAe,CAAC0B,MAAM,CAACC,IAAI,CAAC,KAAK,CAAC;IACvC;EACF;;;AAvDWjC,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAAkC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCXjCC,8BAAgE;MAEpCA;QAAA,OAASC,qBAAiB;MAAA,EAAC;MAACD,iBAAC;MAAAA,iBAAS;MAEhEA,2BAAK;MAEDA,gCACF;MAAAA,iBAAK;MAGPA,kCAAqD;MAAnCA;QAAA,OAAYC,aAAS;MAAA,EAAC;MACtCD,8BAAgC;MACyCA;QAAA;MAAA,EAAsB;MAA7FA,iBAA8H;MAC9HA,iCAAsB;MAAAA,2BAAU;MAAAA,iBAAQ;MAE1CA,+BAA2B;MACiDA;QAAA;MAAA,EAAsB;MAAhGA,iBAAmI;MACnIA,kCAAsB;MAAAA,mCAAa;MAAAA,iBAAQ;MAK7CA,gCAAc;MACkCA,wBAAO;MAAAA,iBAAS;;;MAXSA,gBAAsB;MAAtBA,sCAAsB;MAInBA,eAAsB;MAAtBA,sCAAsB","names":["LoginUser","IniciarSesionComponent","constructor","tokenService","authService","formBuilder","router","$modalSwService","ngOnInit","getToken","isLogged","isLogginFail","roles","getAuthorities","onLogin","loginUser","userName","password","subscribe","data","setToken","token","setUserName","setAuthorities","authorities","navigate","err","errMsj","error","mensaje","console","log","closeModalLogin","$modal","emit","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\EUloc\\Downloads\\New folder (3)\\angular\\src\\app\\components\\iniciar-sesion\\iniciar-sesion.component.ts","C:\\Users\\EUloc\\Downloads\\New folder (3)\\angular\\src\\app\\components\\iniciar-sesion\\iniciar-sesion.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms'\nimport { Router } from '@angular/router';\nimport { LoginUser } from 'src/app/model/login-user';\nimport { AuthService } from 'src/app/service/auth.service';\nimport { ModalSwitchService } from 'src/app/service/modal-switch.service';\nimport { TokenService } from 'src/app/service/token.service';\n\n@Component({\n  selector: 'app-iniciar-sesion',\n  templateUrl: './iniciar-sesion.component.html',\n  styleUrls: ['./iniciar-sesion.component.css']\n})\nexport class IniciarSesionComponent implements OnInit {\n\n  modalSwitch!: boolean;\n\n  isLogged: boolean = false;\n  isLogginFail: boolean = false;\n  loginUser!: LoginUser;\n  userName!: string;\n  password!: string;\n  roles: string[] = [];\n  errMsj!: string;\n\n  constructor(private tokenService: TokenService, private authService: AuthService, private formBuilder: FormBuilder, private router: Router, private $modalSwService: ModalSwitchService) {\n    // this.form=this.formBuilder.group(\n    //   {\n\n    //   }\n    // )\n  }\n\n  ngOnInit(): void {\n    if (this.tokenService.getToken()) {\n      this.isLogged = true;\n      this.isLogginFail = false;\n      this.roles = this.tokenService.getAuthorities();\n    }\n\n  }\n\n  public onLogin(): void {\n    this.loginUser = new LoginUser(this.userName, this.password)\n    this.authService\n      .loginUser(this.loginUser).subscribe(\n        data => {\n          this.isLogged = true;\n          this.isLogginFail = false;\n          this.tokenService.setToken(data.token);\n          this.tokenService.setUserName(data.userName);\n          this.tokenService.setAuthorities(data.authorities);\n          this.roles = data.authorities;\n          this.router.navigate(['']);\n        }, err => {\n          this.isLogged = false;\n          this.isLogginFail = true;\n          this.errMsj = err.error.mensaje;\n          console.log(this.errMsj);\n\n\n        });\n  }\n\n\n  closeModalLogin(): void {\n    this.$modalSwService.$modal.emit(false)\n    //this.modalSwitch = false;\n  }\n\n}\n","<!-- <div class=\"containerModal d-flex\"> -->\n\n  <div class=\"LoginContainer gx-0 gy-0 d-flex flex-column col-12\">\n    <div class=\"closeButton\">\n      <button class=\"rounded\" (click)=\"closeModalLogin()\">X</button>\n    </div>\n    <div>\n      <h2>\n        Iniciar sesion\n      </h2>\n    </div>\n\n    <form #f=\"ngForm\" (ngSubmit)=\"onLogin()\" novalidate >\n      <div class=\"form-floating mb-3\">\n        <input type=\"email\" class=\"form-control\" id=\"userName\" name=\"userName\" [(ngModel)]=\"userName\" required placeholder=\"Usuario\"/>\n        <label for=\"userName\">Tu Usuario</label>\n      </div>\n      <div class=\"form-floating\">\n        <input type=\"password\" class=\"form-control\" id=\"password\" name=\"password\" [(ngModel)]=\"password\" required placeholder=\"Contraseña\">\n        <label for=\"password\">Tu Contraseña</label>\n      </div>\n      <!-- <div class=\"\">\n        <p>Forgot password</p>\n      </div> -->\n      <div class=\"\">\n        <button type=\"submit\" class=\"btn btn-primary\">Iniciar</button>\n      </div>\n    </form>\n\n    \n  </div>\n<!-- </div> -->\n<!--<dialog open class=\"modalContainer d-flex\">\n  <div class=\"modal_body d-flex\">\n    <h3>modal</h3>\n    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam modi nulla repellat voluptas obcaecati! Voluptatum dolores minus ullam natus, consequuntur voluptates error maxime, quam velit porro sed modi nostrum pariatur?</p>\n    <button (click)=\"closeModalLogin()\">x</button>\n  </div>\n</dialog>-->"]},"metadata":{},"sourceType":"module","externalDependencies":[]}